<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Malla Curricular Interactiva</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap');
    :root {
      --rosa: #ffe8f0;
      --amarillo: #fff8d2;
      --celeste: #d9edff;
      --verde: #dff6dd;
      --texto: #444;
      --gris: #ccc;
      --border-radius: 16px;
      --transition-time: 0.3s;
      --ancho-columna: 320px;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Quicksand', sans-serif;
      background: #fafafa;
      color: var(--texto);
      margin: 0; padding: 0;
      overflow-x: hidden;
    }
    header {
      background: #FFF0F1;
      padding: 2rem 1rem;
      text-align: center;
      border-bottom: 2px solid var(--gris);
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
    }
    header h1 {
      margin: 0;
      font-size: 2.25rem;
      font-weight: 600;
      color: #5a5a5a;
    }
    header p {
      margin: 0.5rem 0 0;
      font-style: italic;
      color: #666;
    }
    main {
      display: flex;
      gap: 2rem;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding: 2rem 1rem;
    }
    main::-webkit-scrollbar {
      height: 10px;
    }
    main::-webkit-scrollbar-thumb {
      background-color: #e07cae;
      border-radius: 5px;
    }
    section.anio {
      width: var(--ancho-columna);
      padding: 1.5rem 1rem 2rem;
      border-radius: var(--border-radius);
      box-shadow: 0 5px 12px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      scroll-snap-align: start;
    }
    section.anio h2 {
      text-align: center;
      margin: 0 0 1rem 0;
      font-size: 1.8rem;
      font-weight: 600;
    }
    .anio.rosa { background: var(--rosa); }
    .anio.amarillo { background: var(--amarillo); }
    .anio.celeste { background: var(--celeste); }
    .anio.verde { background: var(--verde); }
    .materias-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    .materia {
      background: white;
      padding: 1rem 1rem;
      border-radius: var(--border-radius);
      box-shadow: 0 3px 10px rgba(0,0,0,0.07);
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 600;
      transition: all var(--transition-time);
    }
    .materia:hover:not(.disabled) {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }
    .materia.disabled {
      opacity: 0.4;
      filter: grayscale(30%);
      pointer-events: none;
      text-decoration: line-through;
    }
    .materia input {
      margin-right: 0.7rem;
      width: 22px;
      height: 22px;
      accent-color: #d57fa1;
      border-radius: 6px;
    }
    .materia input:checked {
      transform: scale(1.1);
    }
    .materia input:hover:not(:disabled) {
      accent-color: #e07cae;
    }
    .residencia {
      background: #fff2c7;
      padding: 1rem;
      border-radius: var(--border-radius);
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      margin: 1rem auto 0;
      cursor: pointer;
    }
    .residencia.disabled {
      opacity: 0.4;
      filter: grayscale(30%);
      pointer-events: none;
    }
    .celebracion {
      text-align: center;
      font-size: 1.5rem;
      margin-top: 1rem;
      color: #4b8b3b;
    }
    @media (max-width:600px) {
      main { flex-direction: column; padding: 1rem; }
      section.anio { width: auto; margin-bottom: 2rem; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Malla Curricular Interactiva</h1>
    <p>Marcá las materias aprobadas para desbloquear las correlativas ✨</p>
  </header>

  <main>
    <!-- 1° Año -->
    <section class="anio rosa">
      <h2>1° Año</h2>
      <div class="materias-grid">
        <div class="materia"><input type="checkbox" id="ingles1" onchange="actualizar()"><label for="ingles1">Lengua Inglesa I</label></div>
        <div class="materia"><input type="checkbox" id="esp1" onchange="actualizar()"><label for="esp1">Lengua Española I</label></div>
        <div class="materia"><input type="checkbox" id="trad1" onchange="actualizar()"><label for="trad1">Traducción I</label></div>
        <div class="materia"><input type="checkbox" id="fono1" onchange="actualizar()"><label for="fono1">Fonología I</label></div>
        <div class="materia"><input type="checkbox" id="gram1" onchange="actualizar()"><label for="gram1">Gramática Inglesa I</label></div>
        <div class="materia"><input type="checkbox" id="cultura" onchange="actualizar()"><label for="cultura">Asp. Bás. de la Cultura</label></div>
        <div class="materia"><input type="checkbox" id="info" onchange="actualizar()"><label for="info">Introd. a los Recursos Informáticos</label></div>
      </div>
    </section>

    <!-- 2° Año -->
    <section class="anio amarillo">
      <h2>2° Año</h2>
      <div class="materias-grid">
        <div class="materia disabled"><input type="checkbox" id="trad2" onchange="actualizar()" disabled><label for="trad2">Traducción II</label></div>
        <div class="materia disabled"><input type="checkbox" id="ingles2" onchange="actualizar()" disabled><label for="ingles2">Lengua Inglesa II</label></div>
        <div class="materia disabled"><input type="checkbox" id="gram2" onchange="actualizar()" disabled><label for="gram2">Gramática Inglesa II</label></div>
        <div class="materia disabled"><input type="checkbox" id="fono2" onchange="actualizar()" disabled><label for="fono2">Fonología II</label></div>
        <div class="materia disabled"><input type="checkbox" id="esp2" onchange="actualizar()" disabled><label for="esp2">Lengua Española II</label></div>
        <div class="materia disabled"><input type="checkbox" id="lit" onchange="actualizar()" disabled><label for="lit">Introd. a la Literatura</label></div>
        <div class="materia disabled"><input type="checkbox" id="term" onchange="actualizar()" disabled><label for="term">Terminología y Documentación</label></div>
      </div>
    </section>

    <!-- 3° Año -->
    <section class="anio celeste">
      <h2>3° Año</h2>
      <div class="materias-grid">
        <div class="materia disabled"><input type="checkbox" id="tradLit1" onchange="actualizar()" disabled><label for="tradLit1">Traducción Literaria I</label></div>
        <div class="materia disabled"><input type="checkbox" id="tradTC1" onchange="actualizar()" disabled><label for="tradTC1">Traducción Técnico‑Científica I</label></div>
        <div class="materia disabled"><input type="checkbox" id="interp1" onchange="actualizar()" disabled><label for="interp1">Interpretación I</label></div>
        <div class="materia disabled"><input type="checkbox" id="ingles3" onchange="actualizar()" disabled><label for="ingles3">Lengua Inglesa III</label></div>
        <div class="materia disabled"><input type="checkbox" id="estrucComp" onchange="actualizar()" disabled><label for="estrucComp">Estructuras Comparadas</label></div>
        <div class="materia disabled"><input type="checkbox" id="lit20" onchange="actualizar()" disabled><label for="lit20">Literatura del Siglo XX</label></div>
        <div class="materia disabled"><input type="checkbox" id="analRiop" onchange="actualizar()" disabled><label for="analRiop">Análisis Textos Rioplatenses</label></div>
      </div>
    </section>

    <!-- 4° Año -->
    <section class="anio verde">
      <h2>4° Año</h2>
      <div class="materias-grid">
        <div class="materia disabled"><input type="checkbox" id="tradInv" onchange="actualizar()" disabled><label for="tradInv">Traducción Inversa</label></div>
        <div class="materia disabled"><input type="checkbox" id="tradLit2" onchange="actualizar()" disabled><label for="tradLit2">Traducción Literaria II</label></div>
        <div class="materia disabled"><input type="checkbox" id="tradTC2" onchange="actualizar()" disabled><label for="tradTC2">Traducción Técnico‑Científica II</label></div>
        <div class="materia disabled"><input type="checkbox" id="interp2" onchange="actualizar()" disabled><label for="interp2">Interpretación II</label></div>
        <div class="materia disabled"><input type="checkbox" id="ingles4" onchange="actualizar()" disabled><label for="ingles4">Lengua Inglesa IV</label></div>
        <div class="materia disabled"><input type="checkbox" id="ling" onchange="actualizar()" disabled><label for="ling">Lingüística</label></div>
        <div class="materia disabled"><input type="checkbox" id="expresion" onchange="actualizar()" disabled><label for="expresion">Expresión Oral y Escrita en Español</label></div>
        <div class="materia disabled"><input type="checkbox" id="desempeno" onchange="actualizar()" disabled><label for="desempeno">Desempeño Profesional</label></div>
        <div class="materia disabled"><input type="checkbox" id="etica" onchange="actualizar()" disabled><label for="etica">Ética y Deontología</label></div>
      </div>
    </section>

    <!-- Residencia -->
    <section class="anio amarillo">
      <h2>Residencia</h2>
      <div class="residencia disabled" id="residenciaBox" onclick="toggleResidencia()">
        <input type="checkbox" id="residencia" onchange="actualizar()" disabled>
        <label for="residencia">Residencia</label>
      </div>
      <div class="celebracion" id="celebracion" style="display:none;">¡Felicitaciones!</div>
    </section>
  </main>

  <script>
    const correl = {
      trad2: ['ingles1','gram1','trad1','esp1'],
      ingles2: ['ingles1','gram1','fono1'],
      gram2: ['ingles1','gram1'],
      fono2: ['fono1'],
      esp2: ['esp1'],
      lit: ['cultura'],
      term: ['info'],
      tradLit1: ['ingles2','gram2','lit','esp2','trad2'],
      tradTC1: ['ingles2','gram2','esp2','trad2'],
      interp1: ['ingles2','fono2','esp2','trad2'],
      ingles3: ['ingles2','gram2','fono2'],
      estrucComp: ['trad2','gram2','esp2'],
      lit20: ['lit'],
      analRiop: ['esp2'],
      tradInv: ['ingles3','tradLit1','interp1','analRiop','estrucComp','tradTC1'],
      tradLit2: ['ingles3','tradLit1','lit20','analRiop','estrucComp'],
      tradTC2: ['ingles3','tradTC1','analRiop','estrucComp'],
      interp2: ['ingles3','tradTC1','interp1','estrucComp'],
      ingles4: ['ingles3'],
      ling: ['tradLit1','tradTC1','estrucComp'],
      expresion: ['analRiop','estrucComp'],
      desempeno: ['tradTC1','tradLit1'],
      etica: [
        'ingles1','esp1','trad1','fono1','gram1','cultura','info',
        'trad2','ingles2','gram2','fono2','esp2','lit','term'
      ]
    };

    function tieneCorrel(id) {
      return correl[id].every(c => document.getElementById(c).checked);
    }

    function actualizar() {
      const estado = {};

      // habilitar 1° año siempre
      ['ingles1','esp1','trad1','fono1','gram1','cultura','info'].forEach(id => {
        const cb = document.getElementById(id), box=cb.parentElement;
        cb.disabled = false;
        box.classList.remove('disabled');
        estado[id] = cb.checked;
      });

      // resto materias según correlativas
      Object.keys(correl).forEach(id => {
        const cb = document.getElementById(id), box = cb.parentElement;
        if(tieneCorrel(id)) {
          cb.disabled = false;
          box.classList.remove('disabled');
        } else {
          cb.disabled = true;
          cb.checked = false;
          box.classList.add('disabled');
        }
        estado[id] = cb.checked;
      });

      // guardar estado en localStorage
      localStorage.setItem("estadoMaterias", JSON.stringify(estado));

      // validar residencia
      const todas3 = ['tradLit1','tradTC1','interp1','ingles3','estrucComp','lit20','analRiop'].every(i => document.getElementById(i).checked);
      const finales4 = ['ingles4','tradTC2','tradLit2','expresion'].every(i => document.getElementById(i).checked);
      const resCB = document.getElementById('residencia'), resBox = document.getElementById('residenciaBox');
      if(todas3 && finales4) {
        resCB.disabled = false;
        resBox.classList.remove('disabled');
      } else {
        resCB.disabled = true;
        resCB.checked = false;
        resBox.classList.add('disabled');
      }

      // mostrar mensaje final
      document.getElementById('celebracion').style.display = resCB.checked ? 'block' : 'none';
    }

    function toggleResidencia() {
      const cb = document.getElementById('residencia');
      if(!cb.disabled) {
        cb.checked = !cb.checked;
        actualizar();
      }
    }

    window.onload = () => {
      const saved = localStorage.getItem("estadoMaterias");
      if(saved) {
        const estado = JSON.parse(saved);
        Object.keys(estado).forEach(id => {
          const cb = document.getElementById(id);
          if(cb) cb.checked = estado[id];
        });
      }
      actualizar();
    };
  </script>
</body>
</html>
