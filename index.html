<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Malla Curricular Interactiva</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap');
    :root {
      --rosa: #ffe8f0;
      --amarillo: #fff8d2;
      --celeste: #d9edff;
      --verde: #dff6dd;
      --texto: #444;
      --gris: #ccc;
      --border-radius: 16px;
      --transition-time: 0.3s;
    }

    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Quicksand', sans-serif;
      background: #fafafa;
      color: var(--texto);
      margin: 0;
      padding: 0;
      line-height: 1.4;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    header {
      background: #FFF0F1;
      padding: 2rem 1rem;
      text-align: center;
      border-bottom: 2px solid var(--gris);
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
    }

    header h1 {
      margin: 0;
      font-weight: 600;
      font-size: 2.25rem;
      letter-spacing: 0.05em;
      color: #5a5a5a;
    }

    header p {
      margin-top: 0.5rem;
      font-style: italic;
      font-weight: 400;
      font-size: 1rem;
      color: #666;
    }

    main {
      max-width: 960px;
      margin: 2rem auto 4rem;
      padding: 0 1rem;
      display: flex;
      flex-direction: row;
      gap: 2rem;
      overflow-x: auto;
      scroll-behavior: smooth;
    }

    section.anio {
      padding: 1.5rem 1rem 2rem;
      border-radius: var(--border-radius);
      margin-bottom: 2rem;
      box-shadow: 0 5px 12px rgba(0,0,0,0.05);
      transition: background-color var(--transition-time);
      min-width: 280px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
    }
    section.anio h2 {
      margin-top: 0;
      font-weight: 600;
      font-size: 1.7rem;
      margin-bottom: 1rem;
      color: #444;
      text-align: center;
    }

    .anio.rosa { background: var(--rosa); }
    .anio.amarillo { background: var(--amarillo); }
    .anio.celeste { background: var(--celeste); }
    .anio.verde { background: var(--verde); }

    .aclaracion {
      background: #fff;
      padding: 0.9rem 1rem;
      border-radius: var(--border-radius);
      font-style: italic;
      margin-bottom: 1.5rem;
      border-left: 5px solid var(--gris);
      color: #555;
      box-shadow: 0 2px 6px rgba(0,0,0,0.07);
      user-select: none;
      max-width: 280px;
      white-space: normal;
    }

    .materias-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
      flex-grow: 1;
    }

    .materia {
      background: white;
      border-radius: var(--border-radius);
      padding: 1rem 1rem 1.2rem;
      box-shadow: 0 3px 10px rgba(0,0,0,0.07);
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: transform var(--transition-time), box-shadow var(--transition-time);
      user-select: none;
      position: relative;
    }
    .materia:hover:not(.disabled) {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }
    .materia.disabled {
      opacity: 0.5;
      pointer-events: none;
      cursor: default;
      filter: grayscale(30%);
      text-decoration: line-through;
    }

    .label {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 1rem;
      font-weight: 600;
      color: var(--texto);
      border-radius: var(--border-radius);
      width: 100%;
    }
    .label input[type="checkbox"] {
      width: 22px;
      height: 22px;
      cursor: pointer;
      accent-color: #d57fa1;
      border-radius: 6px;
      flex-shrink: 0;
      transition: accent-color 0.3s;
    }
    .materia:hover input[type="checkbox"]:not(:disabled) {
      accent-color: #e07cae;
    }
    .label input[type="checkbox"]:disabled {
      cursor: default;
    }

    .nota {
      font-size: 0.82rem;
      color: #a04a65;
      font-style: italic;
      margin-top: 0.8rem;
      user-select: none;
    }

    input[type="checkbox"] {
      transition: transform 0.15s ease-in-out;
    }
    input[type="checkbox"]:checked {
      transform: scale(1.1);
    }

    .residencia {
      background: #fff2c7;
      border-radius: var(--border-radius);
      padding: 1rem 1.2rem;
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      font-style: italic;
      color: #6b541d;
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .celebracion {
      font-size: 1.6rem;
      text-align: center;
      margin-top: 1rem;
      user-select: none;
    }

    @media (max-width: 600px) {
      main {
        flex-direction: column;
        margin: 1rem;
      }
      .aclaracion {
        max-width: 100%;
      }
      section.anio {
        min-width: auto;
        margin-bottom: 2rem;
      }
      .materias-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Malla Curricular Interactiva</h1>
    <p>Marcá las materias aprobadas para desbloquear sus correlativas ✨</p>
  </header>

  <main>
    <!-- Primer Año -->
    <section class="anio rosa" id="anio1">
      <h2>Primer Año</h2>
      <div class="materias-grid">
        <div class="materia" id="box_ingles1"><label class="label"><input type="checkbox" id="ingles1"> Lengua Inglesa I</label></div>
        <div class="materia" id="box_esp1"><label class="label"><input type="checkbox" id="esp1"> Lengua Española I</label></div>
        <div class="materia" id="box_trad1"><label class="label"><input type="checkbox" id="trad1"> Traducción I</label></div>
        <div class="materia" id="box_fono1"><label class="label"><input type="checkbox" id="fono1"> Fonología I</label></div>
        <div class="materia" id="box_gram1"><label class="label"><input type="checkbox" id="gram1"> Gramática Inglesa I</label></div>
        <div class="materia" id="box_cultura"><label class="label"><input type="checkbox" id="cultura"> Asp. Bás. de la Cultura</label></div>
        <div class="materia" id="box_info"><label class="label"><input type="checkbox" id="info"> Introd. a los Recursos Informáticos</label></div>
      </div>
    </section>

    <!-- Segundo Año -->
    <section class="anio amarillo" id="anio2">
      <h2>Segundo Año</h2>
      <div class="aclaracion">
        *Para cursar materias de segundo año,<br> necesitás haber aprobado tres finales <br>de materias de primer año.*
      </div>
      <div class="materias-grid">
        <div class="materia disabled" id="box_trad2">
          <label class="label"><input type="checkbox" id="trad2" disabled> Traducción II</label>
        </div>
        <div class="materia disabled" id="box_ingles2">
          <label class="label"><input type="checkbox" id="ingles2" disabled> Lengua Inglesa II</label>
        </div>
        <div class="materia disabled" id="box_gram2">
          <label class="label"><input type="checkbox" id="gram2" disabled> Gramática Inglesa II</label>
        </div>
        <div class="materia disabled" id="box_fono2">
          <label class="label"><input type="checkbox" id="fono2" disabled> Fonología II</label>
        </div>
        <div class="materia disabled" id="box_esp2">
          <label class="label"><input type="checkbox" id="esp2" disabled> Lengua Española II</label>
        </div>
        <div class="materia disabled" id="box_lit">
          <label class="label"><input type="checkbox" id="lit" disabled> Introd. a la Literatura</label>
        </div>
        <div class="materia disabled" id="box_term">
          <label class="label"><input type="checkbox" id="term" disabled> Terminología y Documentación (taller)</label>
        </div>
      </div>
    </section>

    <!-- Tercer Año -->
    <section class="anio celeste" id="anio3">
      <h2>Tercer Año</h2>
      <div class="aclaracion">
        *Para cursar materias de tercer año,<br> necesitás haber aprobado los finales de todas las materias de primer año <br>y tres finales de materias de segundo año.*
      </div>
      <div class="materias-grid">
        <div class="materia disabled" id="box_tradLit1">
          <label class="label"><input type="checkbox" id="tradLit1" disabled> Traducción Literaria I</label>
        </div>
        <div class="materia disabled" id="box_tradTC1">
          <label class="label"><input type="checkbox" id="tradTC1" disabled> Traducción Técnico-Científica I</label>
        </div>
        <div class="materia disabled" id="box_interp1">
          <label class="label"><input type="checkbox" id="interp1" disabled> Interpretación I (taller)</label>
          <div class="nota">*Se habilita al aprobar todas las materias de primer año*</div>
        </div>
        <div class="materia disabled" id="box_ingles3">
          <label class="label"><input type="checkbox" id="ingles3" disabled> Lengua Inglesa III</label>
        </div>
        <div class="materia disabled" id="box_estrucComp">
          <label class="label"><input type="checkbox" id="estrucComp" disabled> Estructuras Comparadas</label>
        </div>
        <div class="materia disabled" id="box_lit20">
          <label class="label"><input type="checkbox" id="lit20" disabled> Literatura del Siglo XX</label>
        </div>
        <div class="materia disabled" id="box_analRiop">
          <label class="label"><input type="checkbox" id="analRiop" disabled> Análisis de Textos Rioplatenses</label>
        </div>
      </div>
    </section>

    <!-- Cuarto Año -->
    <section class="anio verde" id="anio4">
      <h2>Cuarto Año</h2>
      <div class="aclaracion">
        *Para cursar materias de cuarto año,<br> necesitás haber aprobado los finales de todas las materias de segundo año <br>y tres finales de materias de tercer año.*
      </div>
      <div class="materias-grid">
        <div class="materia disabled" id="box_tradInv">
          <label class="label"><input type="checkbox" id="tradInv" disabled> Traducción Inversa</label>
        </div>
        <div class="materia disabled" id="box_tradLit2">
          <label class="label"><input type="checkbox" id="tradLit2" disabled> Traducción Literaria II</label>
        </div>
        <div class="materia disabled" id="box_tradTC2">
          <label class="label"><input type="checkbox" id="tradTC2" disabled> Traducción Técnico-Científica II</label>
        </div>
        <div class="materia disabled" id="box_interp2">
          <label class="label"><input type="checkbox" id="interp2" disabled> Interpretación II (taller)</label>
          <div class="nota">*Se habilita al aprobar todas las materias de segundo año*</div>
        </div>
        <div class="materia disabled" id="box_etica">
          <label class="label"><input type="checkbox" id="etica" disabled> Ética</label>
          <div class="nota">*Se habilita al aprobar todas las materias de segundo año*</div>
        </div>
        <div class="materia disabled" id="box_ingles4">
          <label class="label"><input type="checkbox" id="ingles4" disabled> Lengua Inglesa IV</label>
        </div>
        <div class="materia disabled" id="box_ling">
          <label class="label"><input type="checkbox" id="ling" disabled> Lingüística</label>
        </div>
        <div class="materia disabled" id="box_expresion">
          <label class="label"><input type="checkbox" id="expresion" disabled> Expresión Oral y Escrita en Español</label>
        </div>
      </div>
    </section>

    <!-- Residencia -->
    <section class="anio rosa" id="residenciaSection" style="min-width: 360px;">
      <h2>Residencia</h2>
      <div class="residencia disabled" id="box_residencia" title="Se habilita al aprobar todos los años y finales necesarios">
        <label class="label" style="cursor:pointer;">
          <input type="checkbox" id="residencia" disabled> 
          Residencia (Práctica Profesionalizante)
        </label>
        <span class="celebracion" id="celebracion" style="display:none;">🎉🎊 ¡Casi terminás la carrera! 🎊🎉</span>
      </div>
      <p style="font-size: 0.9rem; margin-top: 0.6rem; color: #555; max-width: 340px;">
        Para cursar la residencia, necesitás haber aprobado todas las materias de primero, segundo y tercer año, y los finales de: Lengua Inglesa IV, Traducción Técnico-Científica II, Traducción Literaria II, Expresión Oral y Escrita en Español.
      </p>
    </section>
  </main>

  <script>
    // Referencias a materias con sus checkboxes
    const materias = {
      // 1er año
      ingles1: document.getElementById('ingles1'),
      esp1: document.getElementById('esp1'),
      trad1: document.getElementById('trad1'),
      fono1: document.getElementById('fono1'),
      gram1: document.getElementById('gram1'),
      cultura: document.getElementById('cultura'),
      info: document.getElementById('info'),

      // 2do año
      trad2: document.getElementById('trad2'),
      ingles2: document.getElementById('ingles2'),
      gram2: document.getElementById('gram2'),
      fono2: document.getElementById('fono2'),
      esp2: document.getElementById('esp2'),
      lit: document.getElementById('lit'),
      term: document.getElementById('term'),

      // 3er año
      tradLit1: document.getElementById('tradLit1'),
      tradTC1: document.getElementById('tradTC1'),
      interp1: document.getElementById('interp1'),
      ingles3: document.getElementById('ingles3'),
      estrucComp: document.getElementById('estrucComp'),
      lit20: document.getElementById('lit20'),
      analRiop: document.getElementById('analRiop'),

      // 4to año
      tradInv: document.getElementById('tradInv'),
      tradLit2: document.getElementById('tradLit2'),
      tradTC2: document.getElementById('tradTC2'),
      interp2: document.getElementById('interp2'),
      etica: document.getElementById('etica'),
      ingles4: document.getElementById('ingles4'),
      ling: document.getElementById('ling'),
      expresion: document.getElementById('expresion'),

      // Residencia
      residencia: document.getElementById('residencia'),
    };

    // Divs con clase materia para habilitar/deshabilitar
    function getMateriaDiv(id) {
      return document.getElementById('box_' + id);
    }

    // Contar cuántas materias del 1er año están aprobadas
    function countAprobadasPrimerAnio() {
      const keys = ['ingles1','esp1','trad1','fono1','gram1','cultura','info'];
      return keys.filter(k => materias[k].checked).length;
    }

    // Verificar si todas materias de 1er año están aprobadas
    function todasPrimerAnioAprobadas() {
      const keys = ['ingles1','esp1','trad1','fono1','gram1','cultura','info'];
      return keys.every(k => materias[k].checked);
    }

    // Contar cuántas materias del 2do año están aprobadas
    function countAprobadasSegundoAnio() {
      const keys = ['trad2','ingles2','gram2','fono2','esp2','lit','term'];
      return keys.filter(k => materias[k].checked).length;
    }

    // Verificar si todas materias de 2do año están aprobadas
    function todasSegundoAnioAprobadas() {
      const keys = ['trad2','ingles2','gram2','fono2','esp2','lit','term'];
      return keys.every(k => materias[k].checked);
    }

    // Contar cuántas materias del 3er año están aprobadas
    function countAprobadasTercerAnio() {
      const keys = ['tradLit1','tradTC1','interp1','ingles3','estrucComp','lit20','analRiop'];
      return keys.filter(k => materias[k].checked).length;
    }

    // Verificar si todas materias de 3er año están aprobadas
    function todasTercerAnioAprobadas() {
      const keys = ['tradLit1','tradTC1','interp1','ingles3','estrucComp','lit20','analRiop'];
      return keys.every(k => materias[k].checked);
    }

    // Contar cuántas materias del 4to año están aprobadas
    function countAprobadasCuartoAnio() {
      const keys = ['tradInv','tradLit2','tradTC2','interp2','etica','ingles4','ling','expresion'];
      return keys.filter(k => materias[k].checked).length;
    }

    // Verificar si todas materias de 4to año están aprobadas
    function todasCuartoAnioAprobadas() {
      const keys = ['tradInv','tradLit2','tradTC2','interp2','etica','ingles4','ling','expresion'];
      return keys.every(k => materias[k].checked);
    }

    // Función para actualizar habilitación de materias segun correlativas y reglas
    function actualizarEstadoMaterias() {
      // -- Segundo año --
      // Desbloquear materias de segundo año si al menos 3 del primer año aprobadas
      let primerAnioAprobCount = countAprobadasPrimerAnio();
      ['trad2','ingles2','gram2','fono2','esp2','lit','term'].forEach(id => {
        const div = getMateriaDiv(id);
        const checkbox = materias[id];
        if (primerAnioAprobCount >= 3) {
          div.classList.remove('disabled');
          checkbox.disabled = false;
        } else {
          div.classList.add('disabled');
          checkbox.disabled = true;
          checkbox.checked = false;
        }
      });

      // -- Tercer año --
      // Para tercer año materias desbloquear si:
      // todas materias primer año aprobadas + al menos 3 materias de segundo año aprobadas
      let segundoAnioAprobCount = countAprobadasSegundoAnio();
      let tercerAnioIds = ['tradLit1','tradTC1','ingles3','estrucComp','lit20','analRiop'];
      // desbloquear esos si cumple condiciones
      if (todasPrimerAnioAprobadas() && segundoAnioAprobCount >= 3) {
        tercerAnioIds.forEach(id => {
          const div = getMateriaDiv(id);
          const checkbox = materias[id];
          div.classList.remove('disabled');
          checkbox.disabled = false;
        });
      } else {
        tercerAnioIds.forEach(id => {
          const div = getMateriaDiv(id);
          const checkbox = materias[id];
          div.classList.add('disabled');
          checkbox.disabled = true;
          checkbox.checked = false;
        });
      }

      // Interpretación I solo si todas materias primer año aprobadas
      const interp1Div = getMateriaDiv('interp1');
      const interp1Checkbox = materias.interp1;
      if (todasPrimerAnioAprobadas()) {
        interp1Div.classList.remove('disabled');
        interp1Checkbox.disabled = false;
      } else {
        interp1Div.classList.add('disabled');
        interp1Checkbox.disabled = true;
        interp1Checkbox.checked = false;
      }

      // -- Cuarto año --
      // Desbloquear materias de cuarto año si:
      // todas materias 2do año aprobadas + al menos 3 materias tercer año aprobadas
      let tercerAnioAprobCount = countAprobadasTercerAnio();
      let cuartoAnioIds = ['tradInv','tradLit2','tradTC2','ingles4','ling','expresion'];
      if (todasSegundoAnioAprobadas() && tercerAnioAprobCount >=3) {
        cuartoAnioIds.forEach(id => {
          const div = getMateriaDiv(id);
          const checkbox = materias[id];
          div.classList.remove('disabled');
          checkbox.disabled = false;
        });
      } else {
        cuartoAnioIds.forEach(id => {
          const div = getMateriaDiv(id);
          const checkbox = materias[id];
          div.classList.add('disabled');
          checkbox.disabled = true;
          checkbox.checked = false;
        });
      }

      // Interpretación II y Ética solo si todas materias 2do año aprobadas
      const interp2Div = getMateriaDiv('interp2');
      const interp2Checkbox = materias.interp2;
      const eticaDiv = getMateriaDiv('etica');
      const eticaCheckbox = materias.etica;

      if (todasSegundoAnioAprobadas()) {
        interp2Div.classList.remove('disabled');
        interp2Checkbox.disabled = false;
        eticaDiv.classList.remove('disabled');
        eticaCheckbox.disabled = false;
      } else {
        interp2Div.classList.add('disabled');
        interp2Checkbox.disabled = true;
        interp2Checkbox.checked = false;

        eticaDiv.classList.add('disabled');
        eticaCheckbox.disabled = true;
        eticaCheckbox.checked = false;
      }

      // -- Residencia --
      // Se habilita si:
      // Todas materias 1ro, 2do, 3ro aprobadas y finales de 4to año específicas (inglés IV, Trad. TC II, Trad. Lit II, Expresión Oral y Escrita)

      const residenciaDiv = document.getElementById('box_residencia');
      const residenciaCheck = materias.residencia;
      const celebracionSpan = document.getElementById('celebracion');

      const ingles4Ok = materias.ingles4.checked;
      const tradTC2Ok = materias.tradTC2.checked;
      const tradLit2Ok = materias.tradLit2.checked;
      const expresionOk = materias.expresion.checked;

      if (
        todasPrimerAnioAprobadas() &&
        todasSegundoAnioAprobadas() &&
        todasTercerAnioAprobadas() &&
        ingles4Ok && tradTC2Ok && tradLit2Ok && expresionOk
      ) {
        residenciaDiv.classList.remove('disabled');
        residenciaCheck.disabled = false;
        celebracionSpan.style.display = 'inline';
      } else {
        residenciaDiv.classList.add('disabled');
        residenciaCheck.disabled = true;
        residenciaCheck.checked = false;
        celebracionSpan.style.display = 'none';
      }
    }

    // Agregar evento a cada checkbox para actualizar la malla al cambiar
    Object.values(materias).forEach(checkbox => {
      checkbox.addEventListener('change', actualizarEstadoMaterias);
    });

    // Inicializamos la malla
    actualizarEstadoMaterias();
  </script>
</body>
</html>
