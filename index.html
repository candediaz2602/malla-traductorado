<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Malla Curricular Interactiva</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap');
    :root {
      --rosa: #ffe8f0;
      --amarillo: #fff8d2;
      --celeste: #d9edff;
      --verde: #dff6dd;
      --texto: #444;
      --gris: #ccc;
      --border-radius: 16px;
      --transition-time: 0.3s;
    }

    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Quicksand', sans-serif;
      background: #fafafa;
      color: var(--texto);
      margin: 0;
      padding: 0;
      line-height: 1.4;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    header {
      background: #FFF0F1;
      padding: 2rem 1rem;
      text-align: center;
      border-bottom: 2px solid var(--gris);
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header h1 {
      margin: 0;
      font-weight: 600;
      font-size: 2.25rem;
      letter-spacing: 0.05em;
      color: #5a5a5a;
    }

    header p {
      margin-top: 0.5rem;
      font-style: italic;
      font-weight: 400;
      font-size: 1rem;
      color: #666;
    }

    main {
      max-width: 100vw;
      margin: 2rem 0 4rem;
      padding-left: 1rem;
      display: flex;
      gap: 1.5rem;
      overflow-x: auto;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    section.anio {
      flex: 0 0 300px;
      padding: 1.5rem 1rem 2rem;
      border-radius: var(--border-radius);
      box-shadow: 0 5px 12px rgba(0,0,0,0.05);
      transition: background-color var(--transition-time);
      height: auto;
      display: flex;
      flex-direction: column;
      min-height: 600px;
      box-sizing: border-box;
      background-clip: padding-box;
    }
    section.anio h2 {
      margin-top: 0;
      font-weight: 600;
      font-size: 1.7rem;
      margin-bottom: 1rem;
      color: #444;
      text-align: center;
    }

    .anio.rosa { background: var(--rosa); }
    .anio.amarillo { background: var(--amarillo); }
    .anio.celeste { background: var(--celeste); }
    .anio.verde { background: var(--verde); }

    .aclaracion {
      background: #fff;
      padding: 0.9rem 1rem;
      border-radius: var(--border-radius);
      font-style: italic;
      margin-bottom: 1rem;
      border-left: 5px solid var(--gris);
      color: #555;
      box-shadow: 0 2px 6px rgba(0,0,0,0.07);
      user-select: none;
      font-size: 0.9rem;
      flex-shrink: 0;
    }

    .materias-grid {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      overflow-y: auto;
      flex-grow: 1;
      padding-right: 0.5rem;
    }

    .materia {
      background: white;
      border-radius: var(--border-radius);
      padding: 1rem 1rem 1.2rem;
      box-shadow: 0 3px 10px rgba(0,0,0,0.07);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      transition: transform var(--transition-time), box-shadow var(--transition-time);
      user-select: none;
      position: relative;
    }
    .materia:hover:not(.disabled) {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }
    .materia.disabled {
      opacity: 0.5;
      pointer-events: none;
      cursor: default;
      filter: grayscale(30%);
    }

    .label {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 1rem;
      font-weight: 600;
      color: var(--texto);
      border-radius: var(--border-radius);
    }
    .label input[type="checkbox"] {
      width: 22px;
      height: 22px;
      cursor: pointer;
      accent-color: #d57fa1;
      border-radius: 6px;
      flex-shrink: 0;
      transition: accent-color 0.3s;
    }
    .materia:hover input[type="checkbox"]:not(:disabled) {
      accent-color: #e07cae;
    }
    .label input[type="checkbox"]:disabled {
      cursor: default;
    }

    .correlativas {
      margin-top: 0.6rem;
      font-size: 0.82rem;
      color: #666;
      font-weight: 400;
      line-height: 1.3;
      user-select: text;
    }

    .nota {
      font-size: 0.82rem;
      color: #a04a65;
      font-style: italic;
      margin-top: 0.8rem;
      user-select: none;
    }

    input[type="checkbox"] {
      transition: transform 0.15s ease-in-out;
    }
    input[type="checkbox"]:checked {
      transform: scale(1.1);
    }

    .residencia {
      background: #fff2c7;
      border-radius: var(--border-radius);
      padding: 1rem 1.2rem;
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      font-style: italic;
      color: #6b541d;
      max-width: 280px;
      margin: 0 auto;
      text-align: center;
      font-weight: 600;
      flex-shrink: 0;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    main::-webkit-scrollbar {
      height: 10px;
    }
    main::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    main::-webkit-scrollbar-thumb {
      background: #d57fa1;
      border-radius: 10px;
    }
    main::-webkit-scrollbar-thumb:hover {
      background: #e07cae;
    }

    @media (max-width: 800px) {
      main {
        gap: 1rem;
      }
      section.anio {
        flex: 0 0 280px;
        min-height: 550px;
      }
      .residencia {
        max-width: 260px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Malla Curricular Interactiva</h1>
    <p>Marcá las materias aprobadas para desbloquear sus correlativas ✨</p>
  </header>

  <main>
    <section class="anio rosa" id="anio1">
      <h2>Primer Año</h2>
      <div class="materias-grid">
        <div class="materia"><label class="label"><input type="checkbox" id="ingles1" onchange="guardarYActualizar(this)"> Lengua Inglesa I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="esp1" onchange="guardarYActualizar(this)"> Lengua Española I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="trad1" onchange="guardarYActualizar(this)"> Traducción I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="fono1" onchange="guardarYActualizar(this)"> Fonología I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="gram1" onchange="guardarYActualizar(this)"> Gramática Inglesa I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="cultura" onchange="guardarYActualizar(this)"> Asp. Bás. de la Cultura</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="info" onchange="guardarYActualizar(this)"> Introd. a los Recursos Informáticos</label></div>
      </div>
    </section>

    <section class="anio amarillo" id="anio2">
      <h2>Segundo Año</h2>
      <div class="aclaracion">
        *Para cursar materias de segundo año, necesitás haber aprobado tres finales de materias de primer año.*
      </div>
      <div class="materias-grid">
        <div class="materia disabled" id="trad2-box">
          <label class="label"><input type="checkbox" id="trad2" disabled onchange="guardarYActualizar(this)"> Traducción II</label>
          <div class="correlativas">Correlativas: Lengua Inglesa I, Gramática Inglesa I, Traducción I, Lengua Española I</div>
        </div>
        <div class="materia disabled" id="ingles2-box">
          <label class="label"><input type="checkbox" id="ingles2" disabled onchange="guardarYActualizar(this)"> Lengua Inglesa II</label>
          <div class="correlativas">Correlativas: Lengua Inglesa I, Gramática Inglesa I, Fonología I</div>
        </div>
        <div class="materia disabled" id="gram2-box">
          <label class="label"><input type="checkbox" id="gram2" disabled onchange="guardarYActualizar(this)"> Gramática Inglesa II</label>
          <div class="correlativas">Correlativas: Lengua Inglesa I, Gramática Inglesa I</div>
        </div>
        <div class="materia disabled" id="fono2-box">
          <label class="label"><input type="checkbox" id="fono2" disabled onchange="guardarYActualizar(this)"> Fonología II</label>
          <div class="correlativas">Correlativa: Fonología I</div>
        </div>
        <div class="materia disabled" id="esp2-box">
          <label class="label"><input type="checkbox" id="esp2" disabled onchange="guardarYActualizar(this)"> Lengua Española II</label>
          <div class="correlativas">Correlativa: Lengua Española I</div>
        </div>
        <div class="materia disabled" id="lit-box">
          <label class="label"><input type="checkbox" id="lit" disabled onchange="guardarYActualizar(this)"> Introd. a la Literatura</label>
          <div class="correlativas">Correlativa: Asp. Bás. de la Cultura</div>
        </div>
        <div class="materia disabled" id="term-box">
          <label class="label"><input type="checkbox" id="term" disabled onchange="guardarYActualizar(this)"> Terminología y Documentación (taller)</label>
          <div class="correlativas">Correlativa: Introd. a los Recursos Informáticos</div>
        </div>
      </div>
    </section>

    <section class="anio celeste" id="anio3">
      <h2>Tercer Año</h2>
      <div class="aclaracion">
        *Para cursar materias de tercer año, necesitás haber aprobado los finales de todas las materias de primer año y tres finales de materias de segundo año.*
      </div>
      <div class="materias-grid">
        <div class="materia disabled" id="tradLit1-box">
          <label class="label"><input type="checkbox" id="tradLit1" disabled onchange="guardarYActualizar(this)"> Traducción Literaria I</label>
          <div class="correlativas">Correlativas: Lengua Inglesa II, Gramática Inglesa II, Introd. a la Literatura, Lengua Española II, Traducción II</div>
        </div>
        <div class="materia disabled" id="tradTC1-box">
          <label class="label"><input type="checkbox" id="tradTC1" disabled onchange="guardarYActualizar(this)"> Traducción Técnico-Científica I</label>
          <div class="correlativas">Correlativas: Lengua Inglesa II, Gramática Inglesa II, Lengua Española II, Traducción II</div>
        </div>
        <div class="materia disabled" id="interp1-box">
          <label class="label"><input type="checkbox" id="interp1" disabled onchange="guardarYActualizar(this)"> Interpretación I (taller)</label>
          <div class="correlativas">Correlativas: Lengua Inglesa II, Fonología II, Lengua Española II, Traducción II</div>
          <div class="nota">*Para aprobar Interpretación I, no es necesario tener aprobados los finales de las correlativas.*</div>
        </div>
        <div class="materia disabled" id="ingles3-box">
          <label class="label"><input type="checkbox" id="ingles3" disabled onchange="guardarYActualizar(this)"> Lengua Inglesa III</label>
          <div class="correlativas">Correlativas: Lengua Inglesa II, Gramática Inglesa II, Fonología II</div>
        </div>
        <div class="materia disabled" id="estruc-comp-box">
          <label class="label"><input type="checkbox" id="estrucComp" disabled onchange="guardarYActualizar(this)"> Estructuras Comparadas</label>
          <div class="correlativas">Correlativas: Traducción II, Gramática Inglesa II, Lengua Española II</div>
        </div>
        <div class="materia disabled" id="lit20-box">
          <label class="label"><input type="checkbox" id="lit20" disabled onchange="guardarYActualizar(this)"> Literatura del Siglo XX</label>
          <div class="correlativas">Correlativa: Introd. a la Literatura</div>
        </div>
        <div class="materia disabled" id="anal-riop-box">
          <label class="label"><input type="checkbox" id="analRiop" disabled onchange="guardarYActualizar(this)"> Análisis de Textos Rioplatenses</label>
          <div class="correlativas">Correlativa: Lengua Española II</div>
        </div>
      </div>
    </section>

    <section class="anio verde" id="anio4">
      <h2>Cuarto Año</h2>
      <div class="aclaracion">
        *Para cursar materias de cuarto año, necesitás haber aprobado los finales de segundo año y tres finales de tercer año.*
      </div>
      <div class="materias-grid">
        <div class="materia disabled" id="tradInv-box">
          <label class="label"><input type="checkbox" id="tradInv" disabled onchange="guardarYActualizar(this)"> Traducción Inversa</label>
          <div class="correlativas">Correlativas: Lengua Inglesa III, Traducción Literaria I, Interpretación I, Análisis de Textos Rioplatenses, Estructuras Comparadas, Traducción Técnico-Científica I</div>
        </div>
        <div class="materia disabled" id="tradLit2-box">
          <label class="label"><input type="checkbox" id="tradLit2" disabled onchange="guardarYActualizar(this)"> Traducción Literaria II</label>
          <div class="correlativas">Correlativas: Lengua Inglesa III, Traducción Literaria I, Literatura del Siglo XX, Análisis de Textos Rioplatenses, Estructuras Comparadas</div>
        </div>
        <div class="materia disabled" id="tradTC2-box">
          <label class="label"><input type="checkbox" id="tradTC2" disabled onchange="guardarYActualizar(this)"> Traducción Técnico-Científica II</label>
          <div class="correlativas">Correlativas: Lengua Inglesa III, Traducción Técnico-Científica I, Análisis de Textos Rioplatenses, Estructuras Comparadas</div>
        </div>
        <div class="materia disabled" id="interp2-box">
          <label class="label"><input type="checkbox" id="interp2" disabled onchange="guardarYActualizar(this)"> Interpretación II (taller)</label>
          <div class="correlativas">Correlativas: Lengua Inglesa III, Traducción Técnico-Científica I, Interpretación I, Estructuras Comparadas</div>
          <div class="nota">*Para aprobar Interpretación II, no es necesario tener aprobados los finales de las correlativas.*</div>
        </div>
        <div class="materia disabled" id="ingles4-box">
          <label class="label"><input type="checkbox" id="ingles4" disabled onchange="guardarYActualizar(this)"> Lengua Inglesa IV</label>
          <div class="correlativas">Correlativa: Lengua Inglesa III</div>
        </div>
        <div class="materia disabled" id="ling-box">
          <label class="label"><input type="checkbox" id="ling" disabled onchange="guardarYActualizar(this)"> Lingüística General</label>
          <div class="correlativas">Correlativas: Traducción Literaria I, Traducción Técnico-Científica I, Estructuras Comparadas</div>
        </div>
        <div class="materia disabled" id="expresion-box">
          <label class="label"><input type="checkbox" id="expresion" disabled onchange="guardarYActualizar(this)"> Expresión Oral y Escrita</label>
          <div class="correlativas">Correlativas: Análisis de Textos Rioplatenses, Estructuras Comparadas</div>
        </div>
        <div class="materia disabled" id="desempeno-box">
          <label class="label"><input type="checkbox" id="desempeno" disabled onchange="guardarYActualizar(this)"> Desempeño Profesional y Ética</label>
          <div class="correlativas">Correlativas: Traducción Técnico-Científica I, Traducción Literaria I</div>
        </div>
        <div class="materia disabled" id="etica-box">
          <label class="label"><input type="checkbox" id="etica" disabled onchange="guardarYActualizar(this)"> Ética y Deontología (seminario)</label>
          <div class="correlativas">Sin correlativas</div>
        </div>
      </div>
    </section>

    <section class="anio amarillo residencia" id="residencia-section">
      <h2>Residencia Profesional</h2>
      <p>La residencia es el cierre del plan de estudios, con duración aproximada de 6 meses.</p>
    </section>
  </main>

  <script>
    // Defino las correlativas para cada materia
    const materias = {
      ingles1: [],
      esp1: [],
      trad1: [],
      fono1: [],
      gram1: [],
      cultura: [],
      info: [],

      trad2: ["ingles1", "gram1", "trad1", "esp1"],
      ingles2: ["ingles1", "gram1", "fono1"],
      gram2: ["ingles1", "gram1"],
      fono2: ["fono1"],
      esp2: ["esp1"],
      lit: ["cultura"],
      term: ["info"],

      tradLit1: ["ingles2", "gram2", "lit", "esp2", "trad2"],
      tradTC1: ["ingles2", "gram2", "esp2", "trad2"],
      interp1: [], // no necesita correlativas para aprobar, pero sí para cursar, se habilita igual
      ingles3: ["ingles2", "gram2", "fono2"],
      estrucComp: ["trad2", "gram2", "esp2"],
      lit20: ["lit"],
      analRiop: ["esp2"],

      tradInv: ["ingles3", "tradLit1", "interp1", "analRiop", "estrucComp", "tradTC1"],
      tradLit2: ["ingles3", "tradLit1", "lit20", "analRiop", "estrucComp"],
      tradTC2: ["ingles3", "tradTC1", "analRiop", "estrucComp"],
      interp2: [], // mismo caso que interp1
      ingles4: ["ingles3"],
      ling: ["tradLit1", "tradTC1", "estrucComp"],
      expresion: ["analRiop", "estrucComp"],
      desempeno: ["tradTC1", "tradLit1"],
      etica: []
    };

    // Contar cuántas materias están aprobadas (checkbox checked)
    function contarAprobadas(ids) {
      return ids.reduce((acc, id) => {
        const checkbox = document.getElementById(id);
        return acc + (checkbox && checkbox.checked ? 1 : 0);
      }, 0);
    }

    // Función que guarda el estado en localStorage y luego actualiza el estado de la malla
    function guardarYActualizar(checkbox) {
      localStorage.setItem(checkbox.id, checkbox.checked);
      actualizar();
    }

    // Cargar el estado guardado en localStorage
    function cargarEstado() {
      Object.keys(materias).forEach(id => {
        const checkbox = document.getElementById(id);
        if (checkbox) {
          const valorGuardado = localStorage.getItem(id);
          if (valorGuardado !== null) {
            checkbox.checked = valorGuardado === "true";
          }
        }
      });
    }

    // Actualizar habilitación de materias según correlativas y años aprobados
    function actualizar() {
      const primerAnioIds = ["ingles1", "esp1", "trad1", "fono1", "gram1", "cultura", "info"];
      const segundoAnioIds = ["trad2", "ingles2", "gram2", "fono2", "esp2", "lit", "term"];
      const tercerAnioIds = ["tradLit1", "tradTC1", "interp1", "ingles3", "estrucComp", "lit20", "analRiop"];
      const cuartoAnioIds = ["tradInv", "tradLit2", "tradTC2", "interp2", "ingles4", "ling", "expresion", "desempeno", "etica"];

      const aprobPrimerAnio = contarAprobadas(primerAnioIds);
      const aprobSegundoAnio = contarAprobadas(segundoAnioIds);
      const aprobTercerAnio = contarAprobadas(tercerAnioIds);
      const aprobPrimerCompleto = primerAnioIds.every(id => document.getElementById(id).checked);

      const puedeSegundoAnio = aprobPrimerAnio >= 3;
      const puedeTercerAnio = aprobPrimerCompleto && aprobSegundoAnio >= 3;
      const puedeCuartoAnio = aprobSegundoAnio === segundoAnioIds.length && aprobTercerAnio >= 3;

      // Desbloquear segundo año
      segundoAnioIds.forEach(id => {
        const box = document.getElementById(id + "-box");
        const checkbox = document.getElementById(id);
        if (puedeSegundoAnio) {
          const correl = materias[id];
          const todasCorrelativas = correl.every(c => document.getElementById(c).checked);
          if (todasCorrelativas) {
            box.classList.remove("disabled");
            checkbox.disabled = false;
          } else {
            box.classList.add("disabled");
            checkbox.disabled = true;
            checkbox.checked = false;
            localStorage.setItem(id, false);
          }
        } else {
          box.classList.add("disabled");
          checkbox.disabled = true;
          checkbox.checked = false;
          localStorage.setItem(id, false);
        }
      });

      // Desbloquear tercer año
      tercerAnioIds.forEach(id => {
        const box = document.getElementById(id + "-box");
        const checkbox = document.getElementById(id);
        if (puedeTercerAnio) {
          if (id === "interp1") {
            box.classList.remove("disabled");
            checkbox.disabled = false;
          } else {
            const correl = materias[id];
            const todasCorrelativas = correl.every(c => document.getElementById(c).checked);
            if (todasCorrelativas) {
              box.classList.remove("disabled");
              checkbox.disabled = false;
            } else {
              box.classList.add("disabled");
              checkbox.disabled = true;
              checkbox.checked = false;
              localStorage.setItem(id, false);
            }
          }
        } else {
          box.classList.add("disabled");
          checkbox.disabled = true;
          checkbox.checked = false;
          localStorage.setItem(id, false);
        }
      });

      // Desbloquear cuarto año
      cuartoAnioIds.forEach(id => {
        const box = document.getElementById(id + "-box");
        const checkbox = document.getElementById(id);
        if (puedeCuartoAnio) {
          if (id === "interp2" || id === "etica") {
            box.classList.remove("disabled");
            checkbox.disabled = false;
          } else {
            const correl = materias[id];
            const todasCorrelativas = correl.every(c => document.getElementById(c).checked);
            if (todasCorrelativas) {
              box.classList.remove("disabled");
              checkbox.disabled = false;
            } else {
              box.classList.add("disabled");
              checkbox.disabled = true;
              checkbox.checked = false;
              localStorage.setItem(id, false);
            }
          }
        } else {
          box.classList.add("disabled");
          checkbox.disabled = true;
          checkbox.checked = false;
          localStorage.setItem(id, false);
        }
      });
    }

    window.addEventListener("load", () => {
      cargarEstado();
      actualizar();
    });
  </script>
</body>
</html>
