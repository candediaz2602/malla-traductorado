<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Malla Curricular Interactiva</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap');
    :root {
      --rosa: #ffe8f0;
      --amarillo: #fff8d2;
      --celeste: #d9edff;
      --verde: #dff6dd;
      --texto: #444;
      --gris: #ccc;
      --border-radius: 16px;
      --transition-time: 0.3s;
      --ancho-columna: 320px; /* ancho fijo para columnas */
    }

    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Quicksand', sans-serif;
      background: #fafafa;
      color: var(--texto);
      margin: 0;
      padding: 0;
      line-height: 1.4;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }

    header {
      background: #FFF0F1;
      padding: 2rem 1rem;
      text-align: center;
      border-bottom: 2px solid var(--gris);
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
    }

    header h1 {
      margin: 0;
      font-weight: 600;
      font-size: 2.25rem;
      letter-spacing: 0.05em;
      color: #5a5a5a;
    }

    header p {
      margin-top: 0.5rem;
      font-style: italic;
      font-weight: 400;
      font-size: 1rem;
      color: #666;
    }

    main {
      max-width: 100%;
      margin: 2rem auto 4rem;
      padding: 0 1rem;
      display: flex;
      flex-direction: row;
      gap: 2rem;
      overflow-x: auto;
      scroll-behavior: smooth;
      scroll-padding: 1rem;
      scrollbar-width: thin;
      scrollbar-color: #e07cae transparent;
    }
    main::-webkit-scrollbar {
      height: 10px;
    }
    main::-webkit-scrollbar-track {
      background: transparent;
    }
    main::-webkit-scrollbar-thumb {
      background-color: #e07cae;
      border-radius: 5px;
    }

    section.anio {
      padding: 1.5rem 1rem 2rem;
      border-radius: var(--border-radius);
      margin-bottom: 2rem;
      box-shadow: 0 5px 12px rgba(0,0,0,0.05);
      transition: background-color var(--transition-time);
      width: var(--ancho-columna);
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      scroll-snap-align: start;
    }
    section.anio h2 {
      margin-top: 0;
      font-weight: 600;
      font-size: 1.8rem;
      margin-bottom: 1rem;
      color: #444;
      text-align: center;
    }

    .anio.rosa { background: var(--rosa); }
    .anio.amarillo { background: var(--amarillo); }
    .anio.celeste { background: var(--celeste); }
    .anio.verde { background: var(--verde); }

    .materias-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
      flex-grow: 1;
    }

    .materia {
      background: white;
      border-radius: var(--border-radius);
      padding: 1rem 1rem 1.2rem;
      box-shadow: 0 3px 10px rgba(0,0,0,0.07);
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: transform var(--transition-time), box-shadow var(--transition-time);
      user-select: none;
      position: relative;
      font-size: 1rem;
      min-height: 44px;
    }
    .materia:hover:not(.disabled) {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }
    .materia.disabled {
      opacity: 0.5;
      pointer-events: none;
      cursor: default;
      filter: grayscale(30%);
      text-decoration: line-through;
    }

    .label {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-weight: 600;
      color: var(--texto);
      border-radius: var(--border-radius);
      width: 100%;
    }
    .label input[type="checkbox"] {
      width: 22px;
      height: 22px;
      cursor: pointer;
      accent-color: #d57fa1;
      border-radius: 6px;
      flex-shrink: 0;
      transition: accent-color 0.3s;
    }
    .materia:hover input[type="checkbox"]:not(:disabled) {
      accent-color: #e07cae;
    }
    .label input[type="checkbox"]:disabled {
      cursor: default;
    }

    input[type="checkbox"] {
      transition: transform 0.15s ease-in-out;
    }
    input[type="checkbox"]:checked {
      transform: scale(1.1);
    }

    .residencia {
      background: #fff2c7;
      border-radius: var(--border-radius);
      padding: 1rem 1.2rem;
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      font-style: italic;
      color: #6b541d;
      max-width: 300px;
      margin: 0 auto;
      text-align: center;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      min-height: 44px;
      user-select: none;
    }

    .celebracion {
      font-size: 1.6rem;
      text-align: center;
      margin-top: 1rem;
      user-select: none;
    }

    @media (max-width: 600px) {
      main {
        flex-direction: column;
        margin: 1rem;
      }
      section.anio {
        width: 100% !important;
        margin-bottom: 2rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Malla Curricular Interactiva</h1>
    <p>Marc√° las materias aprobadas para desbloquear sus correlativas ‚ú®</p>
  </header>

  <main>
    <!-- Primer A√±o -->
    <section class="anio rosa" id="anio1">
      <h2>Primer A√±o</h2>
      <div class="materias-grid">
        <div class="materia"><label class="label"><input type="checkbox" id="ingles1" onchange="actualizar()"> Lengua Inglesa I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="esp1" onchange="actualizar()"> Lengua Espa√±ola I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="trad1" onchange="actualizar()"> Traducci√≥n I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="fono1" onchange="actualizar()"> Fonolog√≠a I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="gram1" onchange="actualizar()"> Gram√°tica Inglesa I</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="cultura" onchange="actualizar()"> Asp. B√°s. de la Cultura</label></div>
        <div class="materia"><label class="label"><input type="checkbox" id="info" onchange="actualizar()"> Introd. a los Recursos Inform√°ticos</label></div>
      </div>
    </section>

    <!-- Segundo A√±o -->
    <section class="anio amarillo" id="anio2">
      <h2>Segundo A√±o</h2>
      <div class="materias-grid">
        <div class="materia disabled" id="trad2-box">
          <label class="label"><input type="checkbox" id="trad2" disabled onchange="actualizar()"> Traducci√≥n II</label>
        </div>
        <div class="materia disabled" id="ingles2-box">
          <label class="label"><input type="checkbox" id="ingles2" disabled onchange="actualizar()"> Lengua Inglesa II</label>
        </div>
        <div class="materia disabled" id="gram2-box">
          <label class="label"><input type="checkbox" id="gram2" disabled onchange="actualizar()"> Gram√°tica Inglesa II</label>
        </div>
        <div class="materia disabled" id="fono2-box">
          <label class="label"><input type="checkbox" id="fono2" disabled onchange="actualizar()"> Fonolog√≠a II</label>
        </div>
        <div class="materia disabled" id="esp2-box">
          <label class="label"><input type="checkbox" id="esp2" disabled onchange="actualizar()"> Lengua Espa√±ola II</label>
        </div>
        <div class="materia disabled" id="lit-box">
          <label class="label"><input type="checkbox" id="lit" disabled onchange="actualizar()"> Introd. a la Literatura</label>
        </div>
        <div class="materia disabled" id="term-box">
          <label class="label"><input type="checkbox" id="term" disabled onchange="actualizar()"> Terminolog√≠a y Documentaci√≥n (taller)</label>
        </div>
      </div>
    </section>

    <!-- Tercer A√±o -->
    <section class="anio celeste" id="anio3">
      <h2>Tercer A√±o</h2>
      <div class="materias-grid">
        <div class="materia disabled" id="tradLit1-box">
          <label class="label"><input type="checkbox" id="tradLit1" disabled onchange="actualizar()"> Traducci√≥n Literaria I</label>
        </div>
        <div class="materia disabled" id="tradTC1-box">
          <label class="label"><input type="checkbox" id="tradTC1" disabled onchange="actualizar()"> Traducci√≥n T√©cnico-Cient√≠fica I</label>
        </div>
        <div class="materia disabled" id="interp1-box">
          <label class="label"><input type="checkbox" id="interp1" disabled onchange="actualizar()"> Interpretaci√≥n I (taller)</label>
        </div>
        <div class="materia disabled" id="ingles3-box">
          <label class="label"><input type="checkbox" id="ingles3" disabled onchange="actualizar()"> Lengua Inglesa III</label>
        </div>
        <div class="materia disabled" id="estruc-comp-box">
          <label class="label"><input type="checkbox" id="estrucComp" disabled onchange="actualizar()"> Estructuras Comparadas</label>
        </div>
        <div class="materia disabled" id="lit20-box">
          <label class="label"><input type="checkbox" id="lit20" disabled onchange="actualizar()"> Literatura del Siglo XX</label>
        </div>
        <div class="materia disabled" id="anal-riop-box">
          <label class="label"><input type="checkbox" id="analRiop" disabled onchange="actualizar()"> An√°lisis de Textos Rioplatenses</label>
        </div>
      </div>
    </section>

    <!-- Cuarto A√±o -->
    <section class="anio verde" id="anio4">
      <h2>Cuarto A√±o</h2>
      <div class="materias-grid">
        <div class="materia disabled" id="tradInv-box">
          <label class="label"><input type="checkbox" id="tradInv" disabled onchange="actualizar()"> Traducci√≥n Inversa</label>
        </div>
        <div class="materia disabled" id="tradLit2-box">
          <label class="label"><input type="checkbox" id="tradLit2" disabled onchange="actualizar()"> Traducci√≥n Literaria II</label>
        </div>
        <div class="materia disabled" id="tradTC2-box">
          <label class="label"><input type="checkbox" id="tradTC2" disabled onchange="actualizar()"> Traducci√≥n T√©cnico-Cient√≠fica II</label>
        </div>
        <div class="materia disabled" id="interp2-box">
          <label class="label"><input type="checkbox" id="interp2" disabled onchange="actualizar()"> Interpretaci√≥n II (taller)</label>
        </div>
        <div class="materia disabled" id="ingles4-box">
          <label class="label"><input type="checkbox" id="ingles4" disabled onchange="actualizar()"> Lengua Inglesa IV</label>
        </div>
        <div class="materia disabled" id="ling-box">
          <label class="label"><input type="checkbox" id="ling" disabled onchange="actualizar()"> Ling√º√≠stica</label>
        </div>
        <div class="materia disabled" id="expresion-box">
          <label class="label"><input type="checkbox" id="expresion" disabled onchange="actualizar()"> Expresi√≥n Oral y Escrita en Espa√±ol</label>
        </div>
        <div class="materia disabled" id="desempeno-box">
          <label class="label"><input type="checkbox" id="desempeno" disabled onchange="actualizar()"> Desempe√±o Profesional (taller)</label>
        </div>
        <div class="materia disabled" id="etica-box">
          <label class="label"><input type="checkbox" id="etica" disabled onchange="actualizar()"> √âtica y Deontolog√≠a (seminario)</label>
        </div>
      </div>
    </section>

    <!-- Residencia -->
    <section class="anio amarillo" id="residencia-section">
      <h2>Residencia (Pr√°ctica Profesionalizante)</h2>
      <div class="residencia disabled" id="residencia-box" onclick="toggleResidencia()">
        <input type="checkbox" id="residencia" disabled onchange="actualizar()" />
        <label for="residencia" style="flex-grow:1; text-align:center; cursor:pointer;">Residencia</label>
      </div>
      <div id="celebracion" class="celebracion" style="display:none;">üéâ ¬°Casi termin√°s la carrera! üéâ</div>
    </section>
  </main>

  <script>
    function contarAprobadas(ids) {
      return ids.reduce((count, id) => count + (document.getElementById(id).checked ? 1 : 0), 0);
    }

    function todasAprobadas(ids) {
      return ids.every(id => document.getElementById(id).checked);
    }

    function actualizar() {
      // IDs materias por a√±o
      const primerAnio = ['ingles1','esp1','trad1','fono1','gram1','cultura','info'];
      const segundoAnio = ['trad2','ingles2','gram2','fono2','esp2','lit','term'];
      const tercerAnio = ['tradLit1','tradTC1','interp1','ingles3','estrucComp','lit20','analRiop'];
      const cuartoAnio = ['tradInv','tradLit2','tradTC2','interp2','ingles4','ling','expresion','desempeno','etica'];

      // Primer a√±o: siempre habilitadas
      primerAnio.forEach(id => {
        document.getElementById(id).disabled = false;
        document.getElementById(id + '-box').classList.remove('disabled');
      });

      // Segundo a√±o: habilitar si al menos 3 materias de primer a√±o aprobadas
      const primerAnioAprobadas = contarAprobadas(primerAnio);
      segundoAnio.forEach(id => {
        const box = document.getElementById(id + '-box');
        if(primerAnioAprobadas >= 3) {
          document.getElementById(id).disabled = false;
          box.classList.remove('disabled');
        } else {
          document.getElementById(id).disabled = true;
          document.getElementById(id).checked = false;
          box.classList.add('disabled');
        }
      });

      // Tercer a√±o: habilitar si todas de primer a√±o aprobadas + al menos 3 de segundo a√±o aprobadas
      const segundoAnioAprobadas = contarAprobadas(segundoAnio);
      const primerAnioTodas = todasAprobadas(primerAnio);
      tercerAnio.forEach(id => {
        const box = document.getElementById(id + '-box');
        if(primerAnioTodas && segundoAnioAprobadas >= 3) {
          document.getElementById(id).disabled = false;
          box.classList.remove('disabled');
        } else {
          document.getElementById(id).disabled = true;
          document.getElementById(id).checked = false;
          box.classList.add('disabled');
        }
      });

      // Cuarto a√±o: habilitar si todas de segundo a√±o aprobadas + al menos 3 de tercer a√±o aprobadas
      const segundoAnioTodas = todasAprobadas(segundoAnio);
      const tercerAnioAprobadas = contarAprobadas(tercerAnio);
      cuartoAnio.forEach(id => {
        const box = document.getElementById(id + '-box');
        if(segundoAnioTodas && tercerAnioAprobadas >= 3) {
          document.getElementById(id).disabled = false;
          box.classList.remove('disabled');
        } else {
          document.getElementById(id).disabled = true;
          document.getElementById(id).checked = false;
          box.classList.add('disabled');
        }
      });

      // Residencia habilitar si:
      // 1) Todas de primer a√±o aprobadas
      // 2) Todas de segundo a√±o aprobadas
      // 3) Todas de tercer a√±o aprobadas
      // 4) Los finales espec√≠ficos de cuarto a√±o aprobados: Inglesa IV, Trad TC II, Trad Lit II, Expresi√≥n Oral y Escrita
      const cuartoEspecificas = ['ingles4','tradTC2','tradLit2','expresion'];
      const cuartoEspecificasTodas = todasAprobadas(cuartoEspecificas);
      const tercerAnioTodas = todasAprobadas(tercerAnio);

      const residenciaBox = document.getElementById('residencia-box');
      const residenciaCheckbox = document.getElementById('residencia');

      if(primerAnioTodas && segundoAnioTodas && tercerAnioTodas && cuartoEspecificasTodas) {
        residenciaCheckbox.disabled = false;
        residenciaBox.classList.remove('disabled');
      } else {
        residenciaCheckbox.disabled = true;
        residenciaCheckbox.checked = false;
        residenciaBox.classList.add('disabled');
      }

      // Mostrar mensaje celebraci√≥n si residencia aprobada
      const celebracion = document.getElementById('celebracion');
      if(residenciaCheckbox.checked) {
        celebracion.style.display = 'block';
      } else {
        celebracion.style.display = 'none';
      }
    }

    // Permitir clic en todo el cuadro de residencia para marcar checkbox si habilitado
    function toggleResidencia() {
      const res = document.getElementById('residencia');
      if(!res.disabled) {
        res.checked = !res.checked;
        actualizar();
      }
    }

    // IDs de cajas para manejar la clase disabled
    ['ingles1','esp1','trad1','fono1','gram1','cultura','info',
     'trad2','ingles2','gram2','fono2','esp2','lit','term',
     'tradLit1','tradTC1','interp1','ingles3','estrucComp','lit20','analRiop',
     'tradInv','tradLit2','tradTC2','interp2','ingles4','ling','expresion','desempeno','etica'].forEach(id => {
      // A√±adimos '-box' divs manualmente si no existen para primer a√±o materias (que no tienen box)
      if(!document.getElementById(id + '-box')) {
        const checkbox = document.getElementById(id);
        if(checkbox) {
          const wrapper = checkbox.closest('.materia');
          if(wrapper) wrapper.id = id + '-box';
        }
      }
    });

    // Inicializar estado
    window.onload = actualizar;
  </script>
</body>
</html>
